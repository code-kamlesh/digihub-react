{"ast":null,"code":"var _jsxFileName = \"D:\\\\Tata_Strive\\\\WebApplication\\\\digiHub\\\\trunk\\\\digiHubWeb\\\\src\\\\views\\\\BulkUpload.js\";\nimport React from 'react';\nimport * as XLSX from \"xlsx\";\nimport { Checkbox, InputLabel, Input, Grid, Button } from '@material-ui/core';\nimport { SingleSelect } from \"react-select-material-ui\";\nimport label from 'material-ui/svg-icons/action/label';\nimport { useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport { DropzoneArea } from 'material-ui-dropzone';\nimport UserContext from '../components/GolbalContext';\nimport { fetchNotCompletedBatchDetails } from '../util/api';\nlet today = new Date();\nlet dd = String(today.getDate()).padStart(2, '0');\nlet mm = String(today.getMonth() + 1).padStart(2, '0'); //January is 0!\n\nlet yyyy = today.getFullYear();\ntoday = yyyy + '-' + mm + '-' + dd;\nexport default function (props) {\n  const option = [{\n    value: 1,\n    label: \"Mobilization\"\n  }, {\n    value: 2,\n    label: \"Enrollment\"\n  }];\n  const [count, setcount] = useState(0);\n  const [dbUserId, setdbUserId] = useState(0);\n  const [engagementId, setengagementId] = useState(0);\n\n  if (props.id != null && props.id != undefined) {\n    setdbUserId = props.id;\n    setengagementId = props.engagementId;\n  }\n\n  const [batches, setbatches] = useState([]);\n  const [selectedOption, setSelectedOption] = useState(\"\");\n  const [selectedBatches, setselectedBatches] = useState(\"\");\n  const [items, setItems] = useState([]); // // Reading excel file\n  // Calling the above function to read the file\n\n  const readExcel = file => {\n    const fileReader = new FileReader();\n    fileReader.readAsArrayBuffer(file);\n\n    fileReader.onload = e => {\n      const bufferArray = e.target.result;\n      const wb = XLSX.read(bufferArray, {\n        type: \"buffer\"\n      });\n      const wsname = wb.SheetNames[0];\n      const ws = wb.Sheets[wsname];\n      const data = XLSX.utils.sheet_to_json(ws, {\n        header: 1\n      });\n      console.log(\"Data count after : \", data.length - 1);\n      console.log(data[0]);\n      setcount(count => {\n        const x = count + data.length;\n        return x;\n      });\n      console.log(\"DataCount : \", count);\n      const requiredHeader = ['Reg No', 'Aadhar No  ', 'First Name ', 'Middle Name', 'Last Name', 'DOB', 'Gender ', ' Highest Qualification', 'Passing Year', 'Address Line 1', 'Village ', 'District ', 'PINCODE ', 'Category', 'Primary Contact Number', 'Primary Mail ID', 'Created date', 'Created by', 'Updated date', ' Updated by', 'Student ID', 'Eng ID', 'Status ', 'Reason'];\n      let flag = true;\n      requiredHeader.map((element, id) => {\n        // console.log(\"elemet \",element, \"data : \",data[0][id])\n        if (flag) {\n          if (element == data[0][id]) {\n            if (id + 1 == requiredHeader.length) {\n              alert(\"Data in proper format\");\n            }\n          } else {\n            flag = false;\n            alert(\"please fill the all column as per sample template\");\n            return;\n          }\n        } else {// console.log(\"please fill the all column should not be repwted twice\") \n        }\n      });\n    };\n  };\n\n  const [error, setserros] = useState(\"\"); // For handling the dropdown\n\n  const handleChange = e => {\n    setSelectedOption(e);\n    setselectedBatches(\"\");\n\n    if (e == 2 || e === \"Enrollment\") {\n      fetchNotCompletedBatchDetails(UserContext.centerId).then(jsondata => {\n        let result = JSON.parse(jsondata.data); // console.log(result)\n        // console.log(result[0].freezeDate)\n        // setbatches([])\n\n        result.forEach(element => {\n          console.log(\"Condition for date \", element.freezeDate > today);\n\n          if (element.freezeDate > today) {\n            batches.push({\n              \"value\": element.batchId,\n              \"label\": element.batchName\n            });\n          }\n        });\n        console.log(batches);\n      });\n    }\n  }; // for handling batches changes\n\n\n  const batchesChanges = e => {\n    setselectedBatches(e);\n    console.log(\"Batchec : \", e); // console.log(UserContext.)\n\n    console.log(setengagementId.label); // console.log(selectedBatches.e)\n  }; // handlingError((e)=>{\n  //   if(setSelectedOption===\"\"){\n  //     setserros=\"Plase select Some option\"\n  //   }\n  // })\n  // Handler for file upload\n\n\n  const onFileChangeHandler = file => {\n    setItems(file);\n    console.log(file);\n    console.log(\"File name:\", file.name);\n    console.log(\"File name:\", file.lastModifiedDate);\n  }; // Upload document\n\n\n  const uploadDocuments = e => {\n    e.preventDefault();\n    items.map(function (setItems) {\n      // uploadDocument(setItems);\n      {\n        uploadDocument(setItems);\n      }\n      console.log(\"file data : \", setItems);\n    }); //   this.setState({documentNumber:''});\n    //   this.setState({clearDropzoneArea: this.state.clearDropzoneArea + 1});\n    //  // this.setState({typeOfDocument:null});\n    //   this.setState({ documentType:[]});\n  }; // Uploading the file in s3 buckket\n\n\n  const uploadDocument = setItems => {\n    //   e.preventDefault();\n    // var genericDocuments=[\"8thCertificate\",\"10thCertificate\",\"12thCertificate\",\"StudentPicture\",\"PostGraduation\",\"Graduation\"];\n    var levelOfDocument = \"G\"; // if(genericDocuments.includes(this.state.typeOfDocument)){levelOfDocument=\"G\";}\n\n    let localThis = this;\n    let reader = new FileReader();\n    reader.readAsDataURL(setItems);\n\n    reader.onload = function () {\n      let document = reader.result;\n      console.log(document); //  uploadDocument(localThis.state.dbUserId,localThis.state.engagementId,documentType,levelOfDocument,localThis.state.typeOfDocument,document,localThis.state.documentNumber)\n      //  .then((jsondata) => {\n      //        alertDialogOptions.message=<span style={{color:\"green\"}}>{documentType} File uploaded successfully</span>;\n      //        localThis.setState({alertDialogFlag:true});\n      //        localThis.getDocuments();\n      //     })\n    };\n  }; // Routes handling for history\n\n\n  const routeChange = () => {\n    let path = \"./History\"; // history.push(path);\n  };\n\n  return /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 16\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 17\n    }\n  }, \" \"), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    sm: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(InputLabel, {\n    shrink: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 13\n    }\n  }, \"Options\"), /*#__PURE__*/React.createElement(SingleSelect, {\n    name: \"\",\n    id: \"\" // key={this.state.Selectedstate || ''}\n    ,\n    options: option,\n    value: selectedOption,\n    onChange: handleChange // error={handlingError}\n    // onChange={this.handleStateChange.bind(this, 'Selectedstate')}\n    // helperText={this.state.errors.Selectedstate != undefined ? this.state.errors.Selectedstate.label : ''}\n    // error={this.state.errors.Selectedstate != undefined ? this.state.errors.Selectedstate.value : ''}\n    ,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    sm: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 12\n    }\n  }), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    sm: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(InputLabel, {\n    shrink: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 13\n    }\n  }, \"Batches\"), /*#__PURE__*/React.createElement(SingleSelect // key={this.state.Selectedstate || ''}\n  , {\n    name: \"batchname\",\n    id: \"batchId\",\n    options: batches,\n    value: selectedBatches,\n    onChange: batchesChanges // onChange={this.handleStateChange.bind(this, 'Selectedstate')}\n    // helperText={this.state.errors.Selectedstate != undefined ? this.state.errors.Selectedstate.label : ''}\n    // error={this.state.errors.Selectedstate != undefined ? this.state.errors.Selectedstate.value : ''}\n    ,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 13\n    }\n  }))), /*#__PURE__*/React.createElement(Table, {\n    \"aria-label\": \"simple table\",\n    style: {\n      width: \"100%\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(TableBody, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(TableRow, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    name: \"upload-photo\",\n    type: \"file\",\n    onChange: e => {\n      const file = e.target.files[0];\n      readExcel(file);\n    },\n    maxFileSize: 10000000,\n    filesLimit: 1,\n    showFileNames: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      color: \"red\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 15\n    }\n  }, \"Note-: Document size should not be greater than 10mb.\"))))), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 13\n    }\n  }), \" \", /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 20\n    }\n  }), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: uploadDocuments,\n    method: \"post\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    direction: \"row\",\n    justify: \"flex-end\",\n    alignItems: \"flex-end\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    type: \"submit\",\n    variant: \"contained\",\n    color: \"primary\",\n    size: \"small\" // disabled={this.state.file==null || this.state.typeOfDocument=='' || this.state.documentType==''?true:false}\n    ,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 15\n    }\n  }, \"Upload Document\"))), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 14\n    }\n  }), \"  \", /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 22\n    }\n  }), \"  \", /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 30\n    }\n  }), /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    direction: \"row\",\n    justify: \"flex-end\",\n    alignItems: \"flex-end\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 14\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    color: \"primary\",\n    onClick: routeChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 264,\n      columnNumber: 14\n    }\n  }, \"Go to History\")));\n}","map":{"version":3,"sources":["D:/Tata_Strive/WebApplication/digiHub/trunk/digiHubWeb/src/views/BulkUpload.js"],"names":["React","XLSX","Checkbox","InputLabel","Input","Grid","Button","SingleSelect","label","useState","useHistory","Table","TableBody","TableCell","TableHead","TableRow","DropzoneArea","UserContext","fetchNotCompletedBatchDetails","today","Date","dd","String","getDate","padStart","mm","getMonth","yyyy","getFullYear","props","option","value","count","setcount","dbUserId","setdbUserId","engagementId","setengagementId","id","undefined","batches","setbatches","selectedOption","setSelectedOption","selectedBatches","setselectedBatches","items","setItems","readExcel","file","fileReader","FileReader","readAsArrayBuffer","onload","e","bufferArray","target","result","wb","read","type","wsname","SheetNames","ws","Sheets","data","utils","sheet_to_json","header","console","log","length","x","requiredHeader","flag","map","element","alert","error","setserros","handleChange","centerId","then","jsondata","JSON","parse","forEach","freezeDate","push","batchId","batchName","batchesChanges","onFileChangeHandler","name","lastModifiedDate","uploadDocuments","preventDefault","uploadDocument","levelOfDocument","localThis","reader","readAsDataURL","document","routeChange","path","width","files","color"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport * as XLSX from \"xlsx\";\r\nimport { Checkbox, InputLabel, Input, Grid, Button } from '@material-ui/core';\r\nimport { SingleSelect } from \"react-select-material-ui\";\r\nimport label from 'material-ui/svg-icons/action/label';\r\nimport { useState} from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport {DropzoneArea} from 'material-ui-dropzone';\r\nimport UserContext from '../components/GolbalContext'\r\nimport {fetchNotCompletedBatchDetails} from '../util/api';\r\n\r\nlet today = new Date();\r\nlet dd = String(today.getDate()).padStart(2, '0');\r\nlet mm = String(today.getMonth() + 1).padStart(2, '0'); //January is 0!\r\nlet yyyy = today.getFullYear();\r\ntoday = yyyy + '-' + mm + '-' + dd;\r\n\r\nexport default function(props){\r\n    const option=[{value:1, label:\"Mobilization\"},{value:2 ,label:\"Enrollment\"}]\r\n    const [count,setcount]= useState(0);\r\n    const [dbUserId,setdbUserId]= useState(0);\r\n    const [engagementId,setengagementId]= useState(0);\r\n    \r\n    if(props.id != null && props.id != undefined)\r\n    {\r\n      setdbUserId=props.id;\r\n      setengagementId=props.engagementId;\r\n    }\r\n    const [batches, setbatches]= useState([]);\r\n    const [selectedOption, setSelectedOption] = useState(\"\")\r\n    const [selectedBatches, setselectedBatches] = useState(\"\")\r\n    const [items, setItems] = useState([]);\r\n    // // Reading excel file\r\n\r\n    // Calling the above function to read the file\r\n\r\n    const readExcel = (file) => {\r\n       const fileReader = new FileReader();\r\n       fileReader.readAsArrayBuffer(file);\r\n \r\n       fileReader.onload = (e) => {\r\n         const bufferArray = e.target.result;\r\n \r\n         const wb = XLSX.read(bufferArray, { type: \"buffer\" });\r\n \r\n         const wsname = wb.SheetNames[0];\r\n \r\n         const ws = wb.Sheets[wsname];\r\n \r\n         const data = XLSX.utils.sheet_to_json(ws,{header:1});\r\n        console.log( \"Data count after : \",data.length-1)\r\n         console.log(data[0]);\r\n         setcount((count)=>{\r\n         const x =  count+ data.length\r\n         return x\r\n         })\r\n         console.log(\"DataCount : \",count )\r\n\r\n         const requiredHeader =['Reg No', 'Aadhar No  ', 'First Name ', 'Middle Name', 'Last Name', 'DOB', 'Gender ', ' Highest Qualification', 'Passing Year', 'Address Line 1', 'Village ', 'District ', 'PINCODE ', 'Category', 'Primary Contact Number', 'Primary Mail ID', 'Created date', 'Created by', 'Updated date', ' Updated by', 'Student ID', 'Eng ID', 'Status ', 'Reason']\r\n        let flag = true\r\n        requiredHeader.map((element,id) =>{\r\n          // console.log(\"elemet \",element, \"data : \",data[0][id])\r\n          if(flag){\r\n            if(element==data[0][id]){\r\n                if(id+1 == requiredHeader.length)\r\n                {\r\n                alert(\"Data in proper format\");\r\n            }\r\n          }\r\n            else{\r\n              flag = false\r\n              alert(\"please fill the all column as per sample template\")\r\n              return;\r\n            }\r\n          }\r\n          else{\r\n            // console.log(\"please fill the all column should not be repwted twice\") \r\n          }\r\n         \r\n        })\r\n       }\r\n     \r\n   }\r\n\r\n\r\n    const[error,setserros]= useState(\"\")\r\n    // For handling the dropdown\r\n    const handleChange=((e)=>{\r\n      \r\n      setSelectedOption(e);\r\n     \r\n      setselectedBatches(\"\")\r\n      if(e== 2 || e === \"Enrollment\"){\r\n        fetchNotCompletedBatchDetails(UserContext.centerId).then((jsondata) => {\r\n          let result = JSON.parse(jsondata.data);\r\n          // console.log(result)\r\n          // console.log(result[0].freezeDate)\r\n          // setbatches([])\r\n         result.forEach(element => {\r\n\r\n           console.log(\"Condition for date \" , element.freezeDate > today)\r\n            \r\n            if(element.freezeDate > today ){\r\n              batches.push({\r\n                \"value\" : element.batchId,\r\n                \"label\": element.batchName\r\n              })\r\n\r\n          }\r\n         });\r\n         console.log(batches)\r\n        })\r\n      }\r\n    })\r\n\r\n    // for handling batches changes\r\n   const  batchesChanges= ((e)=>{\r\n      setselectedBatches(e)\r\n      console.log(\"Batchec : \",e)\r\n      // console.log(UserContext.)\r\n      console.log(setengagementId.label)\r\n      // console.log(selectedBatches.e)\r\n    })\r\n\r\n    \r\n    // handlingError((e)=>{\r\n    //   if(setSelectedOption===\"\"){\r\n    //     setserros=\"Plase select Some option\"\r\n    //   }\r\n    // })\r\n\r\n    // Handler for file upload\r\n\r\n    const onFileChangeHandler = ((file)=>{\r\n      setItems(file);\r\n      console.log(file)\r\n      console.log(\"File name:\" , file.name)\r\n      console.log(\"File name:\" , file.lastModifiedDate)\r\n     \r\n    })\r\n\r\n    // Upload document\r\n    const uploadDocuments = ((e)=>{\r\n     \r\n        e.preventDefault();\r\n        items.map(function(setItems){\r\n        // uploadDocument(setItems);\r\n        {uploadDocument(setItems)}\r\n        console.log(\"file data : \",setItems)\r\n      });\r\n    \r\n    //   this.setState({documentNumber:''});\r\n    //   this.setState({clearDropzoneArea: this.state.clearDropzoneArea + 1});\r\n    //  // this.setState({typeOfDocument:null});\r\n    //   this.setState({ documentType:[]});\r\n        \r\n    })\r\n\r\n    // Uploading the file in s3 buckket\r\n    const uploadDocument = ((setItems)=>{\r\n        //   e.preventDefault();\r\n       // var genericDocuments=[\"8thCertificate\",\"10thCertificate\",\"12thCertificate\",\"StudentPicture\",\"PostGraduation\",\"Graduation\"];\r\n       var levelOfDocument=\"G\";\r\n       // if(genericDocuments.includes(this.state.typeOfDocument)){levelOfDocument=\"G\";}\r\n       \r\n       \r\n       let localThis=this;\r\n       \r\n       let reader = new FileReader();\r\n       reader.readAsDataURL(setItems);\r\n       reader.onload = function () {\r\n       let  document = reader.result;\r\n       console.log(document)\r\n      //  uploadDocument(localThis.state.dbUserId,localThis.state.engagementId,documentType,levelOfDocument,localThis.state.typeOfDocument,document,localThis.state.documentNumber)\r\n      //  .then((jsondata) => {\r\n      //        alertDialogOptions.message=<span style={{color:\"green\"}}>{documentType} File uploaded successfully</span>;\r\n      //        localThis.setState({alertDialogFlag:true});\r\n      //        localThis.getDocuments();\r\n      //     })\r\n       }\r\n         \r\n    })\r\n\r\n// Routes handling for history\r\n    const routeChange=(()=>{\r\n      let path = \"./History\"; \r\n      // history.push(path);\r\n      \r\n    })\r\n        return(\r\n          \r\n            <Grid container>\r\n               <Grid container>\r\n                <Grid item xs={12}> </Grid>\r\n                <Grid item xs={12} sm={4}>\r\n            <InputLabel shrink={true} >Options</InputLabel>\r\n            <SingleSelect\r\n              name=\"\" id=\"\"\r\n              // key={this.state.Selectedstate || ''}\r\n              options={option}\r\n              value={selectedOption}\r\n              onChange={handleChange}\r\n              // error={handlingError}\r\n              // onChange={this.handleStateChange.bind(this, 'Selectedstate')}\r\n              // helperText={this.state.errors.Selectedstate != undefined ? this.state.errors.Selectedstate.label : ''}\r\n              // error={this.state.errors.Selectedstate != undefined ? this.state.errors.Selectedstate.value : ''}\r\n            />\r\n          </Grid>\r\n\r\n           <Grid item xs={12} sm={2}></Grid>\r\n            <Grid item xs={12} sm={4}>\r\n            <InputLabel shrink={true} >Batches</InputLabel>\r\n            <SingleSelect\r\n              // key={this.state.Selectedstate || ''}\r\n              name=\"batchname\"  id =\"batchId\"\r\n              options={batches}\r\n              value={selectedBatches}\r\n              onChange={batchesChanges}\r\n              // onChange={this.handleStateChange.bind(this, 'Selectedstate')}\r\n              // helperText={this.state.errors.Selectedstate != undefined ? this.state.errors.Selectedstate.label : ''}\r\n              // error={this.state.errors.Selectedstate != undefined ? this.state.errors.Selectedstate.value : ''}\r\n            />\r\n          </Grid>\r\n          </Grid>\r\n         \r\n          <Table  aria-label=\"simple table\" style={{ width:\"100%\"}}>\r\n          <TableBody>\r\n          <TableRow>\r\n            <TableCell> \r\n            <Input \r\n               name=\"upload-photo\"\r\n               type=\"file\"\r\n               onChange={(e) => {\r\n                const file = e.target.files[0];\r\n                readExcel(file);\r\n              }}\r\n              maxFileSize={10000000} filesLimit={1} showFileNames={true}\r\n              />\r\n              <p  style={{color:\"red\"}}>Note-: Document size should not be greater than 10mb.</p>\r\n            </TableCell>\r\n            </TableRow>\r\n            </TableBody>\r\n          </Table>\r\n            <br /> <br />\r\n            <form onSubmit={uploadDocuments} method=\"post\">\r\n              <Grid container direction=\"row\" justify=\"flex-end\" alignItems=\"flex-end\">\r\n              <Button type=\"submit\" variant=\"contained\" color=\"primary\" size=\"small\" \r\n                    // disabled={this.state.file==null || this.state.typeOfDocument=='' || this.state.documentType==''?true:false}\r\n             >Upload Document</Button>\r\n             </Grid>\r\n\r\n             </form>\r\n\r\n\r\n\r\n             <br />  <br />  <br />\r\n\r\n             <Grid container direction=\"row\" justify=\"flex-end\" alignItems=\"flex-end\">\r\n             <Button color=\"primary\"  onClick={routeChange}>\r\n               Go to History\r\n             </Button>\r\n             </Grid>\r\n            </Grid>\r\n       \r\n        )\r\n}   "]},"metadata":{},"sourceType":"module"}