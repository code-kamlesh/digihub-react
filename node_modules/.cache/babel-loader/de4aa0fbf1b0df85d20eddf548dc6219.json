{"ast":null,"code":"var _jsxFileName = \"D:\\\\Tata_Strive\\\\WebApplication\\\\digiHub\\\\trunk\\\\digiHubWeb\\\\src\\\\views\\\\DropoutManagement.js\";\nimport React, { Component } from 'react';\nimport { render } from \"react-dom\";\nimport './../App.css';\nimport './../assets/css/login-style.css';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { SingleSelect } from \"react-select-material-ui\";\nimport callMerge from 'material-ui/svg-icons/communication/call-merge';\nimport UserContext from '../components/GolbalContext';\nimport { FormControl, InputLabel, FormControlLabel, Input, Grid, RadioGroup, Radio, TextField } from '@material-ui/core';\nimport Button from '@material-ui/core/Button';\nimport { roleBasedReadonly, checkButton } from '../util/validation';\nimport AlertDialog from '../util/AlertDialog';\nimport { BrowserRouter as Router, Link } from 'react-router-dom';\nimport { fetchCentersOfUser, fetchCentersDetails, fetchEnrollmentDetailsByBatchId, fetchAllStudentDataByEngagementId, fetchBatchDetails, saveDropoutDetails, fetchStudentDropoutDetailByEngagementId, updateReadyForDropout, fectUserDetails, fetchRunningBatchDetails } from '../util/api';\nimport MUIDataTable from \"mui-datatables\";\nimport TextareaAutosize from '@material-ui/core/TextareaAutosize';\nimport { createMuiTheme, MuiThemeProvider } from '@material-ui/core/styles';\nimport Checkbox from '@material-ui/core/Checkbox';\nconst alertDialogOptions = {\n  message: ''\n};\n\nclass DropoutManagement extends Component {\n  constructor(props) {\n    super(props);\n\n    this.getMuiTheme = () => createMuiTheme({\n      overrides: {\n        MuiTableBody: {\n          root: {}\n        }\n      },\n      typography: {\n        \"fontSize\": 12\n      }\n    });\n\n    this.mySubmitHandler = event => {\n      event.preventDefault();\n      this.state.disabled = true;\n      this.submitDropoutDetails();\n    };\n\n    this.state = {\n      centerId: '',\n      linkedEngagementId: '',\n      dbUserId: '',\n      status: '',\n      selectedEngagementId: '',\n      studentDetails: [],\n      dropoutDetails: [],\n      center: [],\n      batch: [],\n      batchName: '',\n      engagementId: props.engagementId,\n      centerName: '',\n      centerId: '',\n      batchId: '',\n      alertDialogFlag: false,\n      disabled: false,\n      flag: \"0\",\n      errors: {},\n      dropoutData: {\n        createdOn: UserContext.userid,\n        updatedBy: UserContext.userid,\n        roleId: '',\n        effortSpent: '',\n        readyForDropout: 'N'\n      },\n      engagementId: props.engagementId\n    };\n    this.formData = {\n      course: [],\n      activebatches: [],\n      engagementId: [],\n      alertDialogFlag: false\n    };\n    this.handleSelectChange = this.handleSelectChange.bind(this);\n    this.handleInputChange = this.handleInputChange.bind(this);\n    this.fetchCenterById();\n  }\n\n  fetchCenterById() {\n    //alert(\"hi\");\n    let centerId = [];\n    let batchId = [];\n    let currentComponent = this;\n    fetchCentersOfUser(UserContext.userid).then(jsondata => {\n      let userJsonObjects = JSON.parse(jsondata.data);\n      currentComponent.setState({\n        userScope: userJsonObjects\n      });\n      userJsonObjects.forEach(user => {\n        centerId.push({\n          \"id\": user.centerId\n        });\n      });\n    }).then(function (result) {\n      let centerDetails = [];\n      fetchCentersDetails(JSON.stringify(centerId)).then(jsondata => {\n        let centerObjects = JSON.parse(jsondata.data);\n        centerObjects.forEach(center => {\n          centerDetails.push({\n            label: center.name,\n            value: center.id\n          });\n        });\n        currentComponent.setState({\n          center: centerDetails\n        });\n      });\n    });\n  }\n\n  handleInputChange(event) {\n    const target = event.target;\n    let value = target.value;\n    const name = target.name;\n    this.setState({\n      \"disabled\": false\n    });\n    this.setState({\n      dropoutData: { ...this.state.dropoutData,\n        [name]: value\n      }\n    });\n  }\n\n  handleSelectChange(selectname, event) {\n    let centerId = [];\n    let batchId = [];\n\n    if (selectname == \"centerId\") {\n      let batchDetails = [];\n      centerId.push({\n        \"id\": event\n      }); //batchId.push({\"id\":event});\n\n      this.setState({\n        center_id: event\n      });\n      fetchRunningBatchDetails(event).then(jsondata => {\n        let batchObjects = JSON.parse(jsondata.data); //alert(JSON.stringify(batchObjects));\n\n        batchObjects.forEach(batch => {\n          batchDetails.push({\n            label: batch.batchName,\n            value: batch.batchId\n          });\n        });\n        this.setState({\n          batch: batchDetails\n        });\n        this.setState({\n          batchId: \"\"\n        });\n        this.setState({\n          studentDetails: []\n        });\n      });\n    } else {\n      this.setState({\n        batchId: event\n      });\n      this.fetchStudentsByBatchId(event);\n    }\n  }\n\n  fetchStudentsByBatchId(batchId) {\n    fetchEnrollmentDetailsByBatchId(batchId).then(jsondata => {\n      let enrollmentDetails = JSON.parse(jsondata.data); //alert(\"student details\");\n\n      this.formData.engagementId.length = 0;\n      enrollmentDetails.map(item => {\n        this.formData.engagementId.push({\n          engagementId: item.engagementId\n        });\n      });\n      fetchAllStudentDataByEngagementId(JSON.stringify(this.formData.engagementId)).then(jsondata => {\n        let studentInfo = [];\n\n        if (jsondata.data) {\n          let studentDetails = JSON.parse(jsondata.data);\n\n          for (var i = 0; i < studentDetails.length; i++) {\n            if (studentDetails[i].status === \"Enrolled\") {\n              var details = {\n                'student_id': studentDetails[i].dbUserId,\n                'engagement_id': studentDetails[i].engagementId,\n                'name': studentDetails[i].firstName + \" \" + studentDetails[i].lastName,\n                'status': studentDetails[i].status,\n                'readyForDropout': studentDetails[i].readyForDropout\n              };\n              studentInfo.push(details);\n            }\n          }\n        }\n\n        this.setState({\n          studentDetails: []\n        }, () => {\n          this.setState({\n            studentDetails: studentInfo\n          });\n        });\n        studentInfo = null;\n      });\n    });\n  }\n\n  componentDidMount() {\n    roleBasedReadonly();\n  }\n\n  validateAll() {\n    var nonMandatoryFields = [\"\"];\n    var json = this.state.dropoutData;\n    var errors = this.state.errors;\n    Object.keys(json).forEach(function (key) {\n      if (!nonMandatoryFields.includes(key) && (json[key] == undefined || json[key] == '')) {\n        let res = \"Please fill out this field\";\n        errors[key] = {\n          'label': res,\n          'value': res == \"\" ? false : true\n        };\n      }\n    });\n    this.state.errors = errors;\n  }\n\n  submitDropoutDetails() {\n    if (this.state.dropoutData.effortSpent != \"\") {\n      saveDropoutDetails(this.state.dropoutData.effortSpent, this.state.selectedEngagementId, UserContext.userid).then(jsondata => {\n        this.setState({\n          alertDialogFlag: false\n        });\n\n        if (jsondata.appError == null) {\n          let jsonobjects = JSON.parse(jsondata.data);\n          alertDialogOptions.message = /*#__PURE__*/React.createElement(\"span\", {\n            style: {\n              color: \"green\"\n            },\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 203,\n              columnNumber: 41\n            }\n          }, \"Data Saved Sucessfully\");\n          this.setState({\n            alertDialogFlag: true\n          });\n          this.setState({\n            dropoutData: { ...this.state.dropoutData,\n              effortSpent: \"\"\n            }\n          });\n          this.fetchDropoutDetilByEngagementId(this.state.selectedEngagementId);\n        } else {\n          console.log(\"error\");\n        }\n      });\n    }\n\n    if (this.state.dropoutData.readyForDropout === \"Y\" || this.state.dropoutData.readyForDropout === \"N\") {\n      updateReadyForDropout(this.state.selectedEngagementId, this.state.dropoutData.readyForDropout).then(jsondata => {\n        this.setState({\n          alertDialogFlag: false\n        });\n\n        if (jsondata.appError == null) {\n          let jsonobjects = JSON.parse(jsondata.data);\n          alertDialogOptions.message = /*#__PURE__*/React.createElement(\"span\", {\n            style: {\n              color: \"green\"\n            },\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 222,\n              columnNumber: 40\n            }\n          }, \"Data Saved Sucessfully\");\n          this.setState({\n            alertDialogFlag: true\n          });\n        } else {\n          console.log(\"error\");\n        }\n      });\n    }\n  }\n\n  fetchDropoutDetilByEngagementId(engagementId) {\n    let localThis = this;\n    localThis.setState({\n      dropoutDetails: []\n    });\n    let studentDropoutInfo = [];\n    fetchStudentDropoutDetailByEngagementId(engagementId).then(jsondata => {\n      if (jsondata.data) {\n        let dropoutDetails = JSON.parse(jsondata.data);\n\n        for (var i = 0; i < dropoutDetails.length; i++) {\n          let engagementId = dropoutDetails[i].engagementId;\n          let effortSpent = dropoutDetails[i].effortSpent;\n          fectUserDetails(dropoutDetails[i].createdBy).then(jsondata => {\n            let jsonobjects = JSON.parse(jsondata.data);\n            var details = {\n              'engagementId': engagementId,\n              'effortSpent': effortSpent,\n              'createdBy': jsonobjects[0].firstName\n            };\n            studentDropoutInfo.push(details);\n          }).then(function (result) {\n            localThis.setState({\n              dropoutDetails: []\n            }, () => {\n              localThis.setState({\n                dropoutDetails: studentDropoutInfo\n              });\n            });\n          });\n        }\n      }\n    });\n  }\n\n  render() {\n    const columns = [{\n      label: 'Student Id',\n      name: 'student_id',\n      options: {\n        sortDirection: 'desc'\n      },\n      headerStyle: {\n        color: '#FF9800'\n      }\n    }, {\n      label: 'Engagement Id',\n      name: 'engagement_id',\n      headerStyle: {\n        color: '#FF9800'\n      }\n    }, {\n      label: 'Name',\n      name: 'name',\n      headerStyle: {\n        color: '#FF9800'\n      }\n    }, {\n      label: 'Status',\n      name: 'status',\n      headerStyle: {\n        color: '#FF9800'\n      }\n    }, {\n      label: 'readyForDropout',\n      name: 'readyForDropout',\n      headerStyle: {\n        color: '#FF9800'\n      },\n      options: {\n        display: false\n      }\n    }];\n    const options = {\n      filterType: \"dropdown\",\n      responsive: \"stacked\",\n      sortDirection: \"desc\",\n      selectableRows: \"single\",\n      rowsPerPage: 10,\n      selectableRowsOnClick: true,\n      disableToolbarSelect: true,\n      textLabels: {\n        body: {\n          noMatch: /*#__PURE__*/React.createElement(\"span\", {\n            style: {\n              color: \"blue\"\n            },\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 280,\n              columnNumber: 18\n            }\n          }, \"Please select batch/ another batch to load students here\")\n        }\n      },\n      onRowsSelect: (currentRowsSelected, allRows) => {\n        var index = currentRowsSelected[0].dataIndex;\n        var engagementId = this.state.studentDetails[index].engagement_id;\n\n        if (this.state.selectedEngagementId === engagementId) {\n          this.state.selectedStudentId = '';\n          this.setState({\n            selectedEngagementId: ''\n          });\n          this.state.selectedEngagementId = '';\n          this.state.dropoutData.readyForDropout = 'N';\n        } else {\n          this.setState({\n            selectedEngagementId: this.state.studentDetails[index].engagement_id\n          });\n          this.state.selectedStudentId = this.state.studentDetails[index].student_id;\n          this.state.selectedEngagementId = this.state.studentDetails[index].engagement_id;\n          this.state.dropoutData.readyForDropout = this.state.studentDetails[index].readyForDropout;\n          this.setState({\n            status: this.state.studentDetails[index].status\n          });\n          this.setState({\n            dbUserId: this.state.studentDetails[index].student_id\n          });\n          this.fetchDropoutDetilByEngagementId(this.state.studentDetails[index].engagement_id);\n        }\n      }\n    };\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        width: '100%'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 304,\n        columnNumber: 1\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.mySubmitHandler,\n      method: \"post\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 305,\n        columnNumber: 2\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      variant: \"contained\",\n      color: \"primary\",\n      size: \"small\",\n      disabled: UserContext.roleid == 8 ? false : UserContext.roleid == 9 ? false : true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 306,\n        columnNumber: 2\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      style: {\n        color: 'white'\n      },\n      to: {\n        pathname: '/dashboard/dropout'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 307,\n        columnNumber: 1\n      }\n    }, \" Dropout\")), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 310,\n        columnNumber: 3\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 311,\n        columnNumber: 4\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 312,\n        columnNumber: 4\n      }\n    }), /*#__PURE__*/React.createElement(\"fieldset\", {\n      id: \"roleBasedDisable\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 313,\n        columnNumber: 2\n      }\n    }, /*#__PURE__*/React.createElement(Grid, {\n      id: \"hideData\",\n      container: true,\n      spacing: 2,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 314,\n        columnNumber: 1\n      }\n    }, /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 315,\n        columnNumber: 6\n      }\n    }), /*#__PURE__*/React.createElement(Grid, {\n      item: true,\n      xs: 12,\n      sm: 3,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 316,\n        columnNumber: 6\n      }\n    }, /*#__PURE__*/React.createElement(SingleSelect, {\n      name: \"centerName\",\n      id: \"centerName\",\n      placeholder: \"Select Center\",\n      options: this.state.center,\n      onChange: this.handleSelectChange.bind(this, 'centerId'),\n      value: this.state.centerId || '',\n      helperText: this.state.errors.centerName,\n      error: this.state.errors.centerName == '' ? false : true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 317,\n        columnNumber: 6\n      }\n    })), /*#__PURE__*/React.createElement(Grid, {\n      item: true,\n      xs: 12,\n      sm: 3,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 325,\n        columnNumber: 6\n      }\n    }, /*#__PURE__*/React.createElement(SingleSelect, {\n      name: \"batchName\",\n      id: \"batchName\",\n      placeholder: \"Select Batch\",\n      options: this.state.batch,\n      onChange: this.handleSelectChange.bind(this, 'batchId'),\n      value: this.state.batchId || '',\n      key: this.state.batchId,\n      helperText: this.state.errors.batchName,\n      error: this.state.errors.batchName == '' ? false : true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 326,\n        columnNumber: 6\n      }\n    }))), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 335,\n        columnNumber: 4\n      }\n    }), /*#__PURE__*/React.createElement(MuiThemeProvider, {\n      theme: this.getMuiTheme(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 336,\n        columnNumber: 4\n      }\n    }, /*#__PURE__*/React.createElement(MUIDataTable, {\n      title: \"Enrolled Student list\",\n      label: \"List of Students\",\n      data: this.state.studentDetails,\n      columns: columns,\n      options: options,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 337,\n        columnNumber: 7\n      }\n    })), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 344,\n        columnNumber: 5\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 344,\n        columnNumber: 10\n      }\n    }), this.state.selectedEngagementId != '' && /*#__PURE__*/React.createElement(Grid, {\n      id: \"hideData\",\n      container: true,\n      spacing: 2,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 347,\n        columnNumber: 3\n      }\n    }, /*#__PURE__*/React.createElement(Grid, {\n      item: true,\n      xs: 12,\n      sm: 3,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 348,\n        columnNumber: 3\n      }\n    }, /*#__PURE__*/React.createElement(TextareaAutosize, {\n      name: \"effortSpent\",\n      id: \"effortSpent\",\n      onChange: this.handleInputChange,\n      value: this.state.dropoutData.effortSpent,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 349,\n        columnNumber: 4\n      }\n    })), this.state.dropoutDetails.length != 0 && /*#__PURE__*/React.createElement(Grid, {\n      item: true,\n      xs: 12,\n      sm: 3,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 356,\n        columnNumber: 3\n      }\n    }, /*#__PURE__*/React.createElement(FormControlLabel, {\n      control: /*#__PURE__*/React.createElement(Checkbox, {\n        checked: this.state.dropoutData.readyForDropout === \"Y\" ? true : false,\n        onChange: e => {\n          console.log(e.target.checked);\n          this.setState({\n            dropoutData: { ...this.state.dropoutData,\n              readyForDropout: e.target.checked == true ? \"Y\" : \"N\"\n            }\n          });\n        },\n        name: \"antoine\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 358,\n          columnNumber: 22\n        }\n      }),\n      label: \"Ready For Dropout\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 357,\n        columnNumber: 3\n      }\n    })), /*#__PURE__*/React.createElement(Grid, {\n      item: true,\n      xs: 12,\n      sm: 3,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 373,\n        columnNumber: 1\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      type: \"submit\",\n      variant: \"contained\",\n      color: \"primary\",\n      size: \"small\",\n      disabled: this.state.dropoutData.readyForDropout === \"N\" && this.state.dropoutData.effortSpent === '',\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 374,\n        columnNumber: 1\n      }\n    }, \"Save\"))), this.state.selectedEngagementId != '' && /*#__PURE__*/React.createElement(\"table\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 383,\n        columnNumber: 1\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 384,\n        columnNumber: 3\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 385,\n        columnNumber: 5\n      }\n    }, \"Engagement Id\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 386,\n        columnNumber: 5\n      }\n    }, \"Effort Spent\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 387,\n        columnNumber: 5\n      }\n    }, \"Created By\")), this.state.dropoutDetails.map(row => /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 390,\n        columnNumber: 3\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 391,\n        columnNumber: 5\n      }\n    }, row.engagementId), row.effortSpent.length <= 10 && /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 392,\n        columnNumber: 39\n      }\n    }, \" \", row.effortSpent, \" \"), row.effortSpent.length > 10 && /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 393,\n        columnNumber: 38\n      }\n    }, \" \", row.effortSpent.substring(0, 10), \" \\xA0\", /*#__PURE__*/React.createElement(\"a\", {\n      href: \"#\",\n      title: row.effortSpent,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 394,\n        columnNumber: 5\n      }\n    }, \"read more\")), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 396,\n        columnNumber: 5\n      }\n    }, row.createdBy)))))), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 404,\n        columnNumber: 2\n      }\n    }), this.state.alertDialogFlag && /*#__PURE__*/React.createElement(AlertDialog, {\n      message: alertDialogOptions.message,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 407,\n        columnNumber: 35\n      }\n    }));\n  }\n\n}\n\nexport default DropoutManagement;","map":{"version":3,"sources":["D:/Tata_Strive/WebApplication/digiHub/trunk/digiHubWeb/src/views/DropoutManagement.js"],"names":["React","Component","render","SingleSelect","callMerge","UserContext","FormControl","InputLabel","FormControlLabel","Input","Grid","RadioGroup","Radio","TextField","Button","roleBasedReadonly","checkButton","AlertDialog","BrowserRouter","Router","Link","fetchCentersOfUser","fetchCentersDetails","fetchEnrollmentDetailsByBatchId","fetchAllStudentDataByEngagementId","fetchBatchDetails","saveDropoutDetails","fetchStudentDropoutDetailByEngagementId","updateReadyForDropout","fectUserDetails","fetchRunningBatchDetails","MUIDataTable","TextareaAutosize","createMuiTheme","MuiThemeProvider","Checkbox","alertDialogOptions","message","DropoutManagement","constructor","props","getMuiTheme","overrides","MuiTableBody","root","typography","mySubmitHandler","event","preventDefault","state","disabled","submitDropoutDetails","centerId","linkedEngagementId","dbUserId","status","selectedEngagementId","studentDetails","dropoutDetails","center","batch","batchName","engagementId","centerName","batchId","alertDialogFlag","flag","errors","dropoutData","createdOn","userid","updatedBy","roleId","effortSpent","readyForDropout","formData","course","activebatches","handleSelectChange","bind","handleInputChange","fetchCenterById","currentComponent","then","jsondata","userJsonObjects","JSON","parse","data","setState","userScope","forEach","user","push","result","centerDetails","stringify","centerObjects","label","name","value","id","target","selectname","batchDetails","center_id","batchObjects","fetchStudentsByBatchId","enrollmentDetails","length","map","item","studentInfo","i","details","firstName","lastName","componentDidMount","validateAll","nonMandatoryFields","json","Object","keys","key","includes","undefined","res","appError","jsonobjects","color","fetchDropoutDetilByEngagementId","console","log","localThis","studentDropoutInfo","createdBy","columns","options","sortDirection","headerStyle","display","filterType","responsive","selectableRows","rowsPerPage","selectableRowsOnClick","disableToolbarSelect","textLabels","body","noMatch","onRowsSelect","currentRowsSelected","allRows","index","dataIndex","engagement_id","selectedStudentId","student_id","width","roleid","pathname","e","checked","row","substring"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { render } from \"react-dom\";\r\nimport './../App.css';\r\nimport './../assets/css/login-style.css'\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport { SingleSelect } from \"react-select-material-ui\";\r\nimport callMerge from 'material-ui/svg-icons/communication/call-merge';\r\nimport UserContext from '../components/GolbalContext'\r\nimport { FormControl , InputLabel,FormControlLabel, Input, Grid , RadioGroup, Radio, TextField}  from '@material-ui/core';\r\nimport Button from '@material-ui/core/Button';\r\nimport { roleBasedReadonly , checkButton } from '../util/validation';\r\nimport AlertDialog from '../util/AlertDialog';\r\nimport {\r\n  BrowserRouter as Router,\r\n  Link,\r\n  \r\n} from 'react-router-dom';\r\nimport { fetchCentersOfUser, fetchCentersDetails, fetchEnrollmentDetailsByBatchId,fetchAllStudentDataByEngagementId,fetchBatchDetails,saveDropoutDetails,fetchStudentDropoutDetailByEngagementId,\r\n         updateReadyForDropout,fectUserDetails,fetchRunningBatchDetails} from '../util/api';\r\nimport MUIDataTable from \"mui-datatables\";\r\nimport TextareaAutosize from '@material-ui/core/TextareaAutosize';\r\nimport { createMuiTheme, MuiThemeProvider } from '@material-ui/core/styles';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nconst alertDialogOptions = {\r\n  message: ''\r\n}\r\n\r\nclass DropoutManagement extends Component {\r\n    \r\n  constructor(props) {\r\n    super(props);\r\n     \r\n     this.state = {centerId:'',linkedEngagementId:'',dbUserId:'',status:'',selectedEngagementId:'',studentDetails:[],dropoutDetails:[],center: [],batch:[],batchName:'',engagementId : props.engagementId,centerName:'',centerId: '',batchId:'', alertDialogFlag:false , disabled : false , flag : \"0\" , errors : {} , \r\n     dropoutData : {createdOn : UserContext.userid, updatedBy : UserContext.userid ,roleId:'',effortSpent:'',readyForDropout:'N'\r\n         },engagementId:props.engagementId\r\n        };\r\n        this.formData = { course : [], activebatches : [],engagementId:[],alertDialogFlag:false};\r\n      \r\n       this.handleSelectChange = this.handleSelectChange.bind(this);\r\n       this.handleInputChange =this.handleInputChange.bind(this);\r\n   this.fetchCenterById();\r\n   \r\n }\r\n getMuiTheme = () => createMuiTheme({\r\n  overrides: {\r\n    MuiTableBody: {\r\n      root: {\r\n      \r\n      }\r\n    }\r\n  },\r\n  typography: {\r\n    \"fontSize\":12,\r\n   }\r\n})\r\n\r\n fetchCenterById() {\r\n  //alert(\"hi\");\r\n  let centerId = [];\r\n  let batchId =[];\r\n\r\n  let currentComponent = this;\r\n  fetchCentersOfUser(UserContext.userid).then((jsondata) => {\r\n    let userJsonObjects = JSON.parse(jsondata.data);\r\n    currentComponent.setState({ userScope: userJsonObjects });\r\n    userJsonObjects.forEach(user => {\r\n      centerId.push({ \"id\": user.centerId });\r\n    })\r\n  }).then(function (result) {\r\n    let centerDetails = [];\r\n    fetchCentersDetails(JSON.stringify(centerId)).then((jsondata) => {\r\n      let centerObjects = JSON.parse(jsondata.data);\r\n      centerObjects.forEach(center => {\r\n        centerDetails.push({ label: center.name, value: center.id });\r\n      })\r\n      currentComponent.setState({ center: centerDetails });\r\n    });\r\n\r\n\r\n  })\r\n\r\n\r\n\r\n\r\n}\r\nhandleInputChange(event) {\r\n  \r\n     \r\n  const target = event.target;\r\n  let value =  target.value;\r\n  const name = target.name;\r\n  this.setState({\r\n   \"disabled\" : false\r\n });\r\n\r\n  this.setState({\r\n   dropoutData: {\r\n      ...this.state.dropoutData,\r\n      [name]: value\r\n    }\r\n  })\r\n  \r\n}\r\n\r\n\r\nhandleSelectChange(selectname,event) {\r\nlet centerId=[];\r\nlet batchId=[];\r\nif (selectname ==\"centerId\"){\r\n  let batchDetails = [];\r\n  centerId.push({ \"id\": event});\r\n  //batchId.push({\"id\":event});\r\n  this.setState({center_id:event});\r\n  fetchRunningBatchDetails(event).then((jsondata) => {\r\n    let batchObjects = JSON.parse(jsondata.data);\r\n    //alert(JSON.stringify(batchObjects));\r\n    batchObjects.forEach(batch => {\r\n      batchDetails.push({ label: batch.batchName, value: batch.batchId });\r\n    })\r\n    this.setState({\r\n      batch: batchDetails\r\n    });\r\n    this.setState({batchId:\"\"});\r\n    this.setState({studentDetails:[]});\r\n  });\r\n}\r\nelse{\r\n  this.setState({batchId:event});\r\nthis.fetchStudentsByBatchId(event);\r\n}\r\n}\r\n fetchStudentsByBatchId(batchId){\r\n\r\n  fetchEnrollmentDetailsByBatchId(batchId).then((jsondata) => {\r\n    let enrollmentDetails = JSON.parse(jsondata.data);\r\n    //alert(\"student details\");\r\n    this.formData.engagementId.length=0;\r\n    enrollmentDetails.map(item => {this.formData.engagementId.push({engagementId:item.engagementId}) });\r\n    fetchAllStudentDataByEngagementId(JSON.stringify(this.formData.engagementId)).then((jsondata) => {\r\n      let studentInfo=[];\r\n  if(jsondata.data){\r\n      let studentDetails = JSON.parse(jsondata.data);   \r\n      for(var i=0;i<studentDetails.length;i++){\r\n        if(studentDetails[i].status===\"Enrolled\"){\r\n        var  details =\r\n        {    'student_id':studentDetails[i].dbUserId,\r\n            'engagement_id':studentDetails[i].engagementId,\r\n            'name' :studentDetails[i].firstName+\" \"+studentDetails[i].lastName,\r\n            'status':studentDetails[i].status,\r\n            'readyForDropout':studentDetails[i].readyForDropout\r\n        }; \r\n        studentInfo.push(details);    \r\n      }\r\n    } \r\n  \r\n  }    \r\n  \r\n  this.setState({studentDetails:[]},()=>{this.setState({studentDetails:studentInfo})});\r\n  studentInfo=null;\r\n  }); \r\n  });\r\n }\r\n componentDidMount()\r\n    {\r\n      roleBasedReadonly();\r\n    }\r\n mySubmitHandler = (event) => {\r\n   event.preventDefault();\r\n   this.state.disabled = true;\r\n  this.submitDropoutDetails(); \r\n }\r\n validateAll() \r\n{\r\n  var nonMandatoryFields = [\"\"];\r\n  var json = this.state.dropoutData;\r\n  var errors = this.state.errors;\r\n  Object.keys(json).forEach(function(key) {\r\n      if((!nonMandatoryFields.includes(key)) && (json[key] == undefined || json[key] == '' ))\r\n      {\r\n        let res = \"Please fill out this field\";\r\n          errors[key] = {\r\n              'label' : res , \r\n              'value' : res == \"\" ? false : true \r\n            }\r\n     }\r\n  });\r\n  \r\n  this.state.errors = errors;\r\n\r\n}\r\n\r\n \r\n \r\n\r\nsubmitDropoutDetails()\r\n{  \r\n  \r\n  if (this.state.dropoutData.effortSpent!=\"\") {\r\n        saveDropoutDetails(this.state.dropoutData.effortSpent,this.state.selectedEngagementId,UserContext.userid).then((jsondata)=>{\r\n          this.setState({alertDialogFlag:false});\r\n          if(jsondata.appError==null){   \r\n             let jsonobjects = JSON.parse(jsondata.data);\r\n             alertDialogOptions.message=<span style={{color:\"green\"}}>Data Saved Sucessfully</span>;\r\n             this.setState({alertDialogFlag:true});\r\n             this.setState({\r\n              dropoutData: {...this.state.dropoutData,\r\n                 effortSpent: \"\"\r\n               }\r\n             })\r\n             this.fetchDropoutDetilByEngagementId(this.state.selectedEngagementId);\r\n            }  else{\r\n             console.log(\"error\");\r\n         } \r\n      })\r\n\r\n    }\r\n      if (this.state.dropoutData.readyForDropout===\"Y\" || this.state.dropoutData.readyForDropout===\"N\") {\r\n      updateReadyForDropout(this.state.selectedEngagementId,this.state.dropoutData.readyForDropout).then((jsondata)=>{\r\n        this.setState({alertDialogFlag:false});\r\n        if(jsondata.appError==null){   \r\n            let jsonobjects = JSON.parse(jsondata.data);\r\n            alertDialogOptions.message=<span style={{color:\"green\"}}>Data Saved Sucessfully</span>;\r\n            this.setState({alertDialogFlag:true});\r\n        }  else{\r\n            console.log(\"error\");\r\n        } \r\n     })\r\n    }\r\n\r\n}\r\n\r\nfetchDropoutDetilByEngagementId(engagementId){\r\n  let localThis=this;\r\n  localThis.setState({dropoutDetails:[]});\r\n  let studentDropoutInfo=[];\r\n  fetchStudentDropoutDetailByEngagementId(engagementId).then((jsondata) =>{ \r\n    if(jsondata.data){\r\n        let dropoutDetails = JSON.parse(jsondata.data);   \r\n        for(var i=0;i<dropoutDetails.length;i++){\r\n          let engagementId=dropoutDetails[i].engagementId;\r\n          let effortSpent=dropoutDetails[i].effortSpent;\r\n          fectUserDetails(dropoutDetails[i].createdBy).then((jsondata) =>{\r\n            let jsonobjects = JSON.parse(jsondata.data);\r\n            var  details =\r\n            {    \r\n                'engagementId':engagementId,\r\n                'effortSpent':effortSpent,\r\n                'createdBy':jsonobjects[0].firstName\r\n            }; \r\n            studentDropoutInfo.push(details);  \r\n          }).then(function(result){\r\n            localThis.setState({dropoutDetails:[]},()=>{localThis.setState({dropoutDetails:studentDropoutInfo})});\r\n          });\r\n      } \r\n      \r\n    }    \r\n  });\r\n  }\r\n\r\nrender()\r\n{\r\n\r\n  const columns = [{label: 'Student Id', name: 'student_id',options: { sortDirection: 'desc' },headerStyle: {color:'#FF9800'}},\r\n  {label: 'Engagement Id', name: 'engagement_id',headerStyle: {color:'#FF9800'}},\r\n  {label: 'Name', name: 'name',headerStyle: {color:'#FF9800'}},\r\n  {label: 'Status', name: 'status',headerStyle: {color:'#FF9800'}},\r\n  {label: 'readyForDropout', name: 'readyForDropout',headerStyle: {color:'#FF9800'},options: {display: false}}  \r\n ]\r\n\r\n  const options = {\r\n    filterType: \"dropdown\",\r\n    responsive: \"stacked\",\r\n    sortDirection: \"desc\",\r\n    selectableRows:\"single\",\r\n    rowsPerPage:10,\r\n    selectableRowsOnClick: true,\r\n    disableToolbarSelect:true,\r\n    textLabels: {\r\n      body: {\r\n        noMatch: <span style={{color:\"blue\"}}>Please select batch/ another batch to load students here</span>\r\n      }\r\n    },\r\n    onRowsSelect: (currentRowsSelected,allRows) => {\r\n      var index=currentRowsSelected[0].dataIndex;\r\n     var engagementId= this.state.studentDetails[index].engagement_id\r\n      if(this.state.selectedEngagementId===engagementId){\r\n        this.state.selectedStudentId='';\r\n        this.setState({selectedEngagementId:''})\r\n        this.state.selectedEngagementId=''; \r\n        this.state.dropoutData.readyForDropout='N';\r\n      }\r\n      else{\r\n        this.setState({selectedEngagementId:this.state.studentDetails[index].engagement_id})\r\n        this.state.selectedStudentId=this.state.studentDetails[index].student_id;\r\n        this.state.selectedEngagementId=this.state.studentDetails[index].engagement_id; \r\n        this.state.dropoutData.readyForDropout=this.state.studentDetails[index].readyForDropout; \r\n        this.setState({status:this.state.studentDetails[index].status});\r\n        this.setState({dbUserId:this.state.studentDetails[index].student_id});\r\n        this.fetchDropoutDetilByEngagementId(this.state.studentDetails[index].engagement_id);\r\n      }\r\n     }\r\n  };\r\n return (\r\n<div style = {{ width : '100%' }}>\r\n <form onSubmit={this.mySubmitHandler} method=\"post\">\r\n <Button variant=\"contained\"  color=\"primary\" size=\"small\" disabled={UserContext.roleid==8?false:UserContext.roleid==9?false:true}>\r\n<Link style = {{color : 'white'}} to={{ pathname: '/dashboard/dropout'  \r\n}} > Dropout</Link>\r\n  </Button>  \r\n  <br></br>\r\n   <br></br>\r\n   <br></br>  \r\n <fieldset id = \"roleBasedDisable\">\r\n<Grid id=\"hideData\" container spacing={2}>  \r\n     <br></br>\r\n     <Grid item xs={12} sm={3}>\r\n     <SingleSelect  name=\"centerName\" id=\"centerName\"\r\n              placeholder = \"Select Center\"              \r\n              options={this.state.center}  \r\n              onChange={this.handleSelectChange.bind(this, 'centerId')}\r\n              value={this.state.centerId || '' } \r\n              helperText={this.state.errors.centerName}  error={this.state.errors.centerName==''?false:true}    \r\n            />\r\n     </Grid>\r\n     <Grid item xs={12} sm={3}>\r\n     <SingleSelect name=\"batchName\" id=\"batchName\"\r\n              placeholder = \"Select Batch\"              \r\n              options={this.state.batch}  \r\n              onChange={this.handleSelectChange.bind(this, 'batchId')}\r\n              value={this.state.batchId || '' } key={this.state.batchId} \r\n              helperText={this.state.errors.batchName}  error={this.state.errors.batchName==''?false:true}    \r\n            />\r\n      </Grid>\r\n   </Grid>\r\n   <br></br>\r\n   <MuiThemeProvider theme={this.getMuiTheme()}>    \r\n      <MUIDataTable\r\n       title={\"Enrolled Student list\"} label={\"List of Students\"}\r\n        data={this.state.studentDetails} columns={columns} \r\n        options={options} \r\n        />\r\n    </MuiThemeProvider>\r\n \r\n    <br/><br/>\r\n    { \r\n  (this.state.selectedEngagementId!='') &&         \r\n  <Grid id=\"hideData\" container spacing={2}> \r\n  <Grid item xs={12} sm={3}>\r\n   <TextareaAutosize name=\"effortSpent\" id=\"effortSpent\"\r\n          onChange={this.handleInputChange}\r\n          value={this.state.dropoutData.effortSpent}/>\r\n\r\n  </Grid>\r\n  { \r\n  (this.state.dropoutDetails.length!=0) && \r\n  <Grid item xs={12} sm={3}>\r\n  <FormControlLabel\r\n            control={<Checkbox  checked={this.state.dropoutData.readyForDropout===\"Y\"?true:false}\r\n            onChange={e => {\r\n              console.log(e.target.checked);\r\n              this.setState({\r\n                dropoutData: {\r\n                   ...this.state.dropoutData,\r\n                   readyForDropout: (e.target.checked==true?\"Y\":\"N\")\r\n                 }\r\n               })\r\n            }}\r\n            name=\"antoine\" />}\r\n            label=\"Ready For Dropout\"\r\n          />\r\n</Grid>\r\n}\r\n<Grid item xs={12} sm={3}>\r\n<Button  type=\"submit\"  variant=\"contained\" color=\"primary\" size=\"small\" \r\ndisabled={(this.state.dropoutData.readyForDropout===\"N\") && (this.state.dropoutData.effortSpent==='')}>\r\n  Save\r\n</Button>\r\n</Grid>\r\n  </Grid>  \r\n    }\r\n{ \r\n  (this.state.selectedEngagementId!='') && \r\n<table>\r\n  <tr>\r\n    <th>Engagement Id</th>\r\n    <th>Effort Spent</th>\r\n    <th>Created By</th>\r\n  </tr>\r\n  {this.state.dropoutDetails.map(row=>(\r\n  <tr>\r\n    <td>{row.engagementId}</td>\r\n    { (row.effortSpent.length<=10) && <td> {row.effortSpent} </td> }\r\n    { (row.effortSpent.length>10) && <td> {row.effortSpent.substring(0,10)} &nbsp;\r\n    <a href=\"#\" title={row.effortSpent}>read more</a>\r\n    </td> }    \r\n    <td>{row.createdBy}</td>\r\n  </tr>\r\n  ))}\r\n  \r\n</table>\r\n}\r\n   </fieldset>\r\n </form>\r\n <br></br>\r\n \r\n { \r\n  (this.state.alertDialogFlag) && <AlertDialog   message={alertDialogOptions.message}></AlertDialog>\r\n    }\r\n\r\n </div>\r\n\r\n );\r\n}\r\n\r\n}\r\n\r\nexport default DropoutManagement;"]},"metadata":{},"sourceType":"module"}